<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Premium Fitness Content Generator</title>
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #0a0a0a;
      min-height: 100vh;
      padding: 40px 20px;
      position: relative;
      overflow-x: hidden;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.15), transparent 50%),
                  radial-gradient(circle at 80% 80%, rgba(255, 77, 109, 0.15), transparent 50%),
                  radial-gradient(circle at 40% 20%, rgba(59, 130, 246, 0.1), transparent 50%);
      pointer-events: none;
      z-index: 0;
    }

    .container {
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 24px;
      max-width: 900px;
      width: 100%;
      margin: 0 auto;
      padding: 50px;
      position: relative;
      z-index: 1;
      box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5);
    }

    .header {
      text-align: center;
      margin-bottom: 50px;
      position: relative;
    }

    .logo {
      width: 70px;
      height: 70px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 16px;
      margin: 0 auto 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 36px;
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
    }

    .header h1 {
      color: #ffffff;
      font-size: 36px;
      font-weight: 700;
      margin-bottom: 12px;
      letter-spacing: -0.5px;
    }

    .header p {
      color: rgba(255, 255, 255, 0.6);
      font-size: 18px;
      line-height: 1.6;
    }

    .user-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding: 15px 20px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .user-info {
      color: rgba(255, 255, 255, 0.8);
      font-size: 14px;
    }

    .user-email {
      color: #667eea;
      font-weight: 600;
    }

    .btn {
      padding: 10px 20px;
      border-radius: 8px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 14px;
    }

    .btn-secondary {
      background: rgba(255, 255, 255, 0.1);
      color: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .btn-secondary:hover {
      background: rgba(255, 255, 255, 0.15);
    }

    .profile-actions {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
    }

    .btn-load, .btn-clear {
      flex: 1;
      padding: 12px;
      font-size: 14px;
    }

    .btn-load {
      background: rgba(102, 126, 234, 0.2);
      border: 1px solid rgba(102, 126, 234, 0.5);
      color: #a8b8ff;
    }

    .btn-clear {
      background: rgba(255, 77, 109, 0.2);
      border: 1px solid rgba(255, 77, 109, 0.5);
      color: #ffb3c1;
    }

    .saved-indicator {
      display: none;
      padding: 12px 20px;
      background: rgba(72, 187, 120, 0.2);
      border: 1px solid rgba(72, 187, 120, 0.5);
      border-radius: 10px;
      color: #68d391;
      margin-bottom: 20px;
      text-align: center;
      font-size: 14px;
    }

    .login-container {
      max-width: 450px;
      margin: 0 auto;
      text-align: center;
    }

    .login-box {
      background: rgba(255, 255, 255, 0.05);
      padding: 40px;
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      margin-top: 30px;
    }

    .login-box h2 {
      color: #ffffff;
      font-size: 24px;
      margin-bottom: 20px;
    }

    .login-box p {
      color: rgba(255, 255, 255, 0.6);
      margin-bottom: 30px;
      line-height: 1.6;
    }

    .btn-login {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      margin-bottom: 15px;
    }

    .btn-login:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
    }

    .section-header {
      color: #ffffff;
      font-size: 20px;
      font-weight: 600;
      margin: 40px 0 25px 0;
      padding-bottom: 12px;
      border-bottom: 2px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .section-header:first-of-type {
      margin-top: 0;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }

    .form-group {
      margin-bottom: 25px;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    label {
      display: block;
      color: rgba(255, 255, 255, 0.9);
      font-weight: 500;
      margin-bottom: 10px;
      font-size: 14px;
      letter-spacing: 0.3px;
    }

    .required {
      color: #ff4d6d;
    }

    input[type="text"],
    input[type="email"],
    input[type="url"],
    textarea,
    select {
      width: 100%;
      padding: 14px 16px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 10px;
      color: #ffffff;
      font-size: 15px;
      transition: all 0.3s;
      font-family: inherit;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: #667eea;
      background: rgba(255, 255, 255, 0.08);
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    textarea {
      min-height: 100px;
      resize: vertical;
    }

    ::placeholder {
      color: rgba(255, 255, 255, 0.4);
    }

    .helper-text {
      font-size: 13px;
      color: rgba(255, 255, 255, 0.5);
      margin-top: 6px;
      line-height: 1.5;
    }

    .platform-selector {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 15px;
    }

    .platform-card {
      background: rgba(255, 255, 255, 0.04);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 20px;
      transition: all 0.3s;
      cursor: pointer;
    }

    .platform-card:hover {
      border-color: rgba(102, 126, 234, 0.5);
      background: rgba(255, 255, 255, 0.06);
    }

    .platform-card.active {
      border-color: #667eea;
      background: rgba(102, 126, 234, 0.1);
    }

    .platform-card input[type="checkbox"] {
      position: absolute;
      opacity: 0;
      cursor: pointer;
    }

    .platform-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }

    .platform-icon {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }

    .platform-name {
      color: #ffffff;
      font-weight: 600;
      font-size: 16px;
    }

    .platform-details {
      display: none;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .platform-card.active .platform-details {
      display: block;
    }

    .platform-details label {
      font-size: 12px;
      margin-bottom: 6px;
      color: rgba(255, 255, 255, 0.7);
    }

    .platform-details input,
    .platform-details select {
      padding: 10px 12px;
      font-size: 14px;
      margin-bottom: 10px;
    }

    .image-toggle {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 10px;
      padding: 8px 0;
    }

    .image-toggle input[type="checkbox"] {
      position: relative;
      opacity: 1;
      width: 18px;
      height: 18px;
      cursor: pointer;
    }

    .image-toggle label {
      margin: 0;
      font-size: 13px;
      color: rgba(255, 255, 255, 0.8);
      cursor: pointer;
    }

    .cta-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 10px;
      margin-top: 10px;
    }

    .cta-option {
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      padding: 12px;
      cursor: pointer;
      transition: all 0.3s;
      text-align: center;
      position: relative;
    }

    .cta-option input[type="checkbox"] {
      position: absolute;
      opacity: 0;
    }

    .cta-option:hover {
      border-color: rgba(102, 126, 234, 0.5);
    }

    .cta-option.selected {
      border-color: #667eea;
      background: rgba(102, 126, 234, 0.15);
    }

    .cta-label {
      color: rgba(255, 255, 255, 0.9);
      font-size: 13px;
      font-weight: 500;
    }

    .submit-btn {
      width: 100%;
      padding: 18px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 17px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 30px;
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
      letter-spacing: 0.5px;
    }

    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
    }

    .submit-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .message {
      padding: 16px 20px;
      border-radius: 10px;
      margin-top: 20px;
      text-align: center;
      font-weight: 500;
      display: none;
    }

    .success-message {
      background: rgba(72, 187, 120, 0.2);
      border: 1px solid rgba(72, 187, 120, 0.5);
      color: #68d391;
    }

    .error-message {
      background: rgba(245, 101, 101, 0.2);
      border: 1px solid rgba(245, 101, 101, 0.5);
      color: #fc8181;
    }

    .hidden {
      display: none;
    }

    @media (max-width: 768px) {
      .container {
        padding: 30px 25px;
      }
      .form-row {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div id="loginScreen" class="container login-container">
    <div class="header">
      <div class="logo">üèãÔ∏è</div>
      <h1>Premium Content Generator</h1>
      <p>Professional social media marketing for elite fitness brands</p>
    </div>

    <div class="login-box">
      <h2>Member Access</h2>
      <p>Log in to access your saved profiles and generate premium content instantly.</p>
      <button class="btn-login" onclick="netlifyIdentity.open()">Login / Sign Up</button>
      <p class="helper-text">New members: Click above to create your account</p>
    </div>
  </div>

  <div id="mainForm" class="container hidden">
    <div class="header">
      <div class="logo">üèãÔ∏è</div>
      <h1>Premium Content Generator</h1>
      <p>Professional social media marketing tailored to your fitness brand</p>
    </div>

    <div class="user-bar">
      <div class="user-info">
        Logged in as: <span class="user-email" id="userEmail"></span>
      </div>
      <button class="btn btn-secondary" onclick="handleLogout()">Logout</button>
    </div>

    <div class="profile-actions">
      <button class="btn btn-load" onclick="loadSavedProfile()">üì• Load My Last Profile</button>
      <button class="btn btn-clear" onclick="clearForm()">üóëÔ∏è Clear Form</button>
    </div>

    <div id="savedIndicator" class="saved-indicator">
      ‚úì Loaded your saved profile from last submission
    </div>

    <form name="fitness-content-pro" id="contentForm">
      <div class="section-header">
        <span>üìã</span> Business Information
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Gym/Studio Name <span class="required">*</span></label>
          <input type="text" name="gym_name" required placeholder="e.g., Elite Fitness Studio">
        </div>

        <div class="form-group">
          <label>Brand/Business Name <span class="required">*</span></label>
          <input type="text" name="brand_name" required placeholder="e.g., FitLife by Sarah">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Contact Email <span class="required">*</span></label>
          <input type="email" name="email" required placeholder="your@email.com">
        </div>

        <div class="form-group">
          <label>Website URL</label>
          <input type="url" name="website" placeholder="https://yourwebsite.com">
        </div>
      </div>

      <div class="form-group">
        <label>Brand Sponsors/Partners</label>
        <input type="text" name="sponsors" placeholder="e.g., Nike, Gatorade, Local Health Mart">
      </div>

      <div class="section-header">
        <span>üéØ</span> Target Audience & Brand Voice
      </div>

      <div class="form-group">
        <label>Target Audience <span class="required">*</span></label>
        <textarea name="target_audience" required placeholder="Who are your ideal clients?"></textarea>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Brand Voice/Tone <span class="required">*</span></label>
          <input type="text" name="brand_voice" required placeholder="e.g., Motivational and empowering">
          <p class="helper-text">How should your content sound?</p>
        </div>

        <div class="form-group">
          <label>Primary Fitness Focus</label>
          <input type="text" name="fitness_focus" placeholder="e.g., Strength training, HIIT">
        </div>
      </div>

      <div class="form-group">
        <label>Your Unique Value Proposition</label>
        <textarea name="unique_value" placeholder="What makes you different from competitors?"></textarea>
      </div>

      <div class="section-header">
        <span>‚ú®</span> Content Strategy
      </div>

      <div class="form-group">
        <label>Call-to-Action Preferences</label>
        <div class="cta-grid" id="ctaGrid">
          <div class="cta-option">
            <input type="checkbox" name="cta_types" value="book_class" id="cta1">
            <label for="cta1" class="cta-label">Book a Class</label>
          </div>
          <div class="cta-option">
            <input type="checkbox" name="cta_types" value="free_trial" id="cta2">
            <label for="cta2" class="cta-label">Free Trial</label>
          </div>
          <div class="cta-option">
            <input type="checkbox" name="cta_types" value="consultation" id="cta3">
            <label for="cta3" class="cta-label">Free Consultation</label>
          </div>
          <div class="cta-option">
            <input type="checkbox" name="cta_types" value="dm_us" id="cta4">
            <label for="cta4" class="cta-label">DM Us</label>
          </div>
          <div class="cta-option">
            <input type="checkbox" name="cta_types" value="link_bio" id="cta5">
            <label for="cta5" class="cta-label">Link in Bio</label>
          </div>
          <div class="cta-option">
            <input type="checkbox" name="cta_types" value="sign_up" id="cta6">
            <label for="cta6" class="cta-label">Sign Up Now</label>
          </div>
          <div class="cta-option">
            <input type="checkbox" name="cta_types" value="join_challenge" id="cta7">
            <label for="cta7" class="cta-label">Join Challenge</label>
          </div>
          <div class="cta-option">
            <input type="checkbox" name="cta_types" value="shop" id="cta8">
            <label for="cta8" class="cta-label">Shop Now</label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>Hooks & Special Promotions</label>
        <textarea name="hooks_deals" placeholder="Any upcoming deals or promotions?"></textarea>
      </div>

      <div class="form-group">
        <label>Key Messaging Points</label>
        <textarea name="key_messages" placeholder="Specific messages or themes to emphasize?"></textarea>
      </div>

      <div class="section-header">
        <span>üì±</span> Social Media Platforms
      </div>

      <div class="platform-selector" id="platformSelector">
        <div class="platform-card" data-platform="instagram">
          <input type="checkbox" name="platform_instagram" id="platform_instagram">
          <div class="platform-header">
            <div class="platform-icon" style="background: linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%);">üì∑</div>
            <div class="platform-name">Instagram</div>
          </div>
          <div class="platform-details">
            <label>Number of Posts</label>
            <select name="instagram_posts">
              <option value="1">1 post</option>
              <option value="2" selected>2 posts</option>
              <option value="3">3 posts</option>
              <option value="4">4 posts</option>
              <option value="5">5 posts</option>
            </select>
            <label>Instagram Handle</label>
            <input type="text" name="instagram_handle" placeholder="@yourbrand">
            <div class="image-toggle">
              <input type="checkbox" name="instagram_images" id="instagram_images" checked>
              <label for="instagram_images">Include images?</label>
            </div>
          </div>
        </div>

        <div class="platform-card" data-platform="facebook">
          <input type="checkbox" name="platform_facebook" id="platform_facebook">
          <div class="platform-header">
            <div class="platform-icon" style="background: #1877f2;">üìò</div>
            <div class="platform-name">Facebook</div>
          </div>
          <div class="platform-details">
            <label>Number of Posts</label>
            <select name="facebook_posts">
              <option value="1">1 post</option>
              <option value="2" selected>2 posts</option>
              <option value="3">3 posts</option>
            </select>
            <label>Facebook Page</label>
            <input type="text" name="facebook_handle" placeholder="facebook.com/yourbrand">
            <div class="image-toggle">
              <input type="checkbox" name="facebook_images" id="facebook_images" checked>
              <label for="facebook_images">Include images?</label>
            </div>
          </div>
        </div>

        <div class="platform-card" data-platform="twitter">
          <input type="checkbox" name="platform_twitter" id="platform_twitter">
          <div class="platform-header">
            <div class="platform-icon" style="background: #000000;">ùïè</div>
            <div class="platform-name">Twitter / X</div>
          </div>
          <div class="platform-details">
            <label>Number of Posts</label>
            <select name="twitter_posts">
              <option value="1">1 post</option>
              <option value="2" selected>2 posts</option>
              <option value="3">3 posts</option>
            </select>
            <label>Handle</label>
            <input type="text" name="twitter_handle" placeholder="@yourbrand">
            <div class="image-toggle">
              <input type="checkbox" name="twitter_images" id="twitter_images" checked>
              <label for="twitter_images">Include images?</label>
            </div>
          </div>
        </div>

        <div class="platform-card" data-platform="tiktok">
          <input type="checkbox" name="platform_tiktok" id="platform_tiktok">
          <div class="platform-header">
            <div class="platform-icon" style="background: linear-gradient(135deg, #00f2ea 0%, #ff0050 100%);">üéµ</div>
            <div class="platform-name">TikTok</div>
          </div>
          <div class="platform-details">
            <label>Number of Posts</label>
            <select name="tiktok_posts">
              <option value="1">1 post</option>
              <option value="2" selected>2 posts</option>
              <option value="3">3 posts</option>
            </select>
            <label>Handle</label>
            <input type="text" name="tiktok_handle" placeholder="@yourbrand">
            <div class="image-toggle">
              <input type="checkbox" name="tiktok_images" id="tiktok_images" checked>
              <label for="tiktok_images">Include images?</label>
            </div>
          </div>
        </div>

        <div class="platform-card" data-platform="linkedin">
          <input type="checkbox" name="platform_linkedin" id="platform_linkedin">
          <div class="platform-header">
            <div class="platform-icon" style="background: #0077b5;">üíº</div>
            <div class="platform-name">LinkedIn</div>
          </div>
          <div class="platform-details">
            <label>Number of Posts</label>
            <select name="linkedin_posts">
              <option value="1">1 post</option>
              <option value="2" selected>2 posts</option>
              <option value="3">3 posts</option>
            </select>
            <label>Profile/Page</label>
            <input type="text" name="linkedin_handle" placeholder="linkedin.com/company/yourbrand">
            <div class="image-toggle">
              <input type="checkbox" name="linkedin_images" id="linkedin_images" checked>
              <label for="linkedin_images">Include images?</label>
            </div>
          </div>
        </div>
      </div>

      <div class="section-header">
        <span>‚öôÔ∏è</span> Additional Preferences
      </div>

      <div class="form-group">
        <label>Special Instructions</label>
        <textarea name="special_instructions" placeholder="Any other requirements?"></textarea>
      </div>

      <button type="submit" class="submit-btn" id="submitBtn">
        üöÄ Generate Premium Content
      </button>

      <div class="success-message message" id="successMessage">
        ‚úÖ Success! Your content is being generated. Check your email in 2-3 minutes!
      </div>

      <div class="error-message message" id="errorMessage">
        ‚ùå Something went wrong. Please try again.
      </div>
    </form>
  </div>

  <script>
    netlifyIdentity.on('init', user => {
      if (user) {
        showMainForm(user);
      }
    });

    netlifyIdentity.on('login', user => {
      showMainForm(user);
      netlifyIdentity.close();
    });

    netlifyIdentity.on('logout', () => {
      document.getElementById('loginScreen').classList.remove('hidden');
      document.getElementById('mainForm').classList.add('hidden');
    });

    function showMainForm(user) {
      document.getElementById('loginScreen').classList.add('hidden');
      document.getElementById('mainForm').classList.remove('hidden');
      document.getElementById('userEmail').textContent = user.email;
      
      loadSavedProfile();
    }

    function handleLogout() {
      if (confirm('Are you sure you want to logout?')) {
        netlifyIdentity.logout();
      }
    }

    function saveProfile(data) {
      const user = netlifyIdentity.currentUser();
      if (!user) return;
      
      const profileKey = `fitness_profile_${user.id}`;
      localStorage.setItem(profileKey, JSON.stringify(data));
    }

    function loadSavedProfile() {
      const user = netlifyIdentity.currentUser();
      if (!user) return;
      
      const profileKey = `fitness_profile_${user.id}`;
      const savedData = localStorage.getItem(profileKey);
      
      if (!savedData) {
        return;
      }
      
      const data = JSON.parse(savedData);
      
      Object.keys(data).forEach(key => {
        const input = document.querySelector(`[name="${key}"]`);
        if (input && input.type !== 'checkbox') {
          input.value = data[key] || '';
        }
      });
      
      if (data.cta_types && Array.isArray(data.cta_types)) {
        data.cta_types.forEach(cta => {
          const checkbox = document.querySelector(`[name="cta_types"][value="${cta}"]`);
          if (checkbox) {
            checkbox.checked = true;
            checkbox.closest('.cta-option').classList.add('selected');
          }
        });
      }
      
      if (data.platforms && Array.isArray(data.platforms)) {
        data.platforms.forEach(platform => {
          const card = document.querySelector(`[data-platform="${platform.name}"]`);
          if (card) {
            const checkbox = card.querySelector('input[type="checkbox"]');
            checkbox.checked = true;
            card.classList.add('active');
            
            const postsSelect = card.querySelector(`[name="${platform.name}_posts"]`);
            const handleInput = card.querySelector(`[name="${platform.name}_handle"]`);
            const imagesCheckbox = card.querySelector(`[name="${platform.name}_images"]`);
            
            if (postsSelect) postsSelect.value = platform.posts;
            if (handleInput) handleInput.value = platform.handle;
            if (imagesCheckbox) imagesCheckbox.checked = platform.includeImages !== false;
          }
        });
      }
      
      document.getElementById('savedIndicator').style.display = 'block';
      setTimeout(() => {
        document.getElementById('savedIndicator').style.display = 'none';
      }, 4000);
    }

    function clearForm() {
      if (confirm('Clear all form data?')) {
        document.getElementById('contentForm').reset();
        document.querySelectorAll('.platform-card').forEach(card => card.classList.remove('active'));
        document.querySelectorAll('.cta-option').forEach(option => option.classList.remove('selected'));
      }
    }

    document.querySelectorAll('.platform-card').forEach(card => {
      const checkbox = card.querySelector('input[type="checkbox"]');
      card.addEventListener('click', (e) => {
        if (e.target.tagName !== 'INPUT' && e.target.tagName !== 'SELECT') {
          checkbox.checked = !checkbox.checked;
          card.classList.toggle('active', checkbox.checked);
        }
      });
      checkbox.addEventListener('change', () => {
        card.classList.toggle('active', checkbox.checked);
      });
    });

    document.querySelectorAll('.cta-option').forEach(option => {
      const checkbox = option.querySelector('input[type="checkbox"]');
      option.addEventListener('click', () => {
        checkbox.checked = !checkbox.checked;
        option.classList.toggle('selected', checkbox.checked);
      });
      checkbox.addEventListener('change', () => {
        option.classList.toggle('selected', checkbox.checked);
      });
    });

    document.getElementById('contentForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const submitBtn = document.getElementById('submitBtn');
      const successMessage = document.getElementById('successMessage');
      const errorMessage = document.getElementById('errorMessage');
      
      const selectedPlatforms = document.querySelectorAll('.platform-card.active');
      if (selectedPlatforms.length === 0) {
        errorMessage.textContent = '‚ùå Please select at least one platform';
        errorMessage.style.display = 'block';
        setTimeout(() => errorMessage.style.display = 'none', 4000);
        return;
      }
      
      const selectedCTAs = document.querySelectorAll('.cta-option.selected');
      if (selectedCTAs.length === 0) {
        errorMessage.textContent = '‚ùå Please select at least one CTA';
        errorMessage.style.display = 'block';
        setTimeout(() => errorMessage.style.display = 'none', 4000);
        return;
      }
      
      const formData = new FormData(e.target);
      
      const platforms = [];
      selectedPlatforms.forEach(card => {
        const platform = card.dataset.platform;
        const includeImages = formData.get(`${platform}_images`) === 'on';
        
        platforms.push({
          name: platform,
          posts: parseInt(formData.get(`${platform}_posts`)) || 2,
          handle: formData.get(`${platform}_handle`) || '',
          includeImages: includeImages
        });
      });
      
      const ctas = Array.from(selectedCTAs).map(option => 
        option.querySelector('input').value
      );
      
      const webhookData = {
        gym_name: formData.get('gym_name'),
        brand_name: formData.get('brand_name'),
        email: formData.get('email'),
        website: formData.get('website') || '',
        sponsors: formData.get('sponsors') || '',
        target_audience: formData.get('target_audience'),
        brand_voice: formData.get('brand_voice'),
        fitness_focus: formData.get('fitness_focus') || '',
        unique_value: formData.get('unique_value') || '',
        cta_types: ctas,
        hooks_deals: formData.get('hooks_deals') || '',
        key_messages: formData.get('key_messages') || '',
        platforms: platforms,
        special_instructions: formData.get('special_instructions') || ''
      };
      
      saveProfile(webhookData);
      
      submitBtn.disabled = true;
      submitBtn.textContent = '‚ö° Generating Content...';
      
      try {
        const response = await fetch('https://jmac.app.n8n.cloud/webhook/800adf0e-3242-4164-8ea1-c53a888c89f4', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(webhookData)
        });
        
        if (response.ok) {
          successMessage.style.display = 'block';
          setTimeout(() => successMessage.style.display = 'none', 6000);
        } else {
          throw new Error('Failed');
        }
      } catch (error) {
        errorMessage.style.display = 'block';
        setTimeout(() => errorMessage.style.display = 'none', 6000);
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'üöÄ Generate Premium Content';
      }
    });
  </script>
</body>
</html>
